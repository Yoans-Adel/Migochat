# ๐ค Product Recommender - ูุญุฑู ุงูุชูุตูุงุช ุงูุฐูู

**ุงููุณุฎุฉ:** 1.0.0  
**ุงูุชุงุฑูุฎ:** 13 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ Production Ready

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุญุฑู ุงูุชูุตูุงุช ุงูุฐูู (Product Recommender) ูู ูุธุงู AI ูุชูุฏู ูุชุชุจุน ุณููู ุงูุนููุงุก ูููุฏู ุชูุตูุงุช ููุชุฌุงุช ูุฎุตุตุฉ ุจูุงุกู ุนูู ุงูุชูุงูุงุชูู ูุชูุถููุงุชูู.

### ๐ฏ ุงูุฃูุฏุงู

1. **ุชุญุณูู ุชุฌุฑุจุฉ ุงูุนููู** - ุชูุตูุงุช ูุฎุตุตุฉ ููู ุนููู
2. **ุฒูุงุฏุฉ ุงููุจูุนุงุช** - ุงูุชุฑุงุญุงุช ููุชุฌุงุช ุฐุงุช ุตูุฉ
3. **ุชูุณูู ุงูุฃุฒูุงุก** - ูุณุงุนุฏุฉ ุงูุนููู ูู ุงุฎุชูุงุฑ ุงูููุงุจุณ ุงูููุงุณุจุฉ
4. **ููู ุณููู ุงูุนููุงุก** - ุชุญููู ุงูุชูุถููุงุช ูุงูุฃููุงุท

---

## โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุชุชุจุน ุงูุชูุงูุงุช ุงูุนููุงุก ๐

ูุชุชุจุน ุงููุธุงู ุชููุงุฆูุงู:
- **ุงุณุชุนูุงูุงุช ุงูุจุญุซ**: ุขุฎุฑ 20 ุจุญุซ ููุนููู
- **ุงููุฆุงุช ุงูููุถูุฉ**: ุงูููุชุฌุงุช ุงูุชู ูุดุงูุฏูุง (ูุณุชุงูุ ุจูุทูููุ ุจููุฒุฉุ ุฅูุฎ)
- **ุงูุฃููุงู ุงูููุถูุฉ**: ุชุญููู ุชูุถููุงุช ุงูุฃููุงู
- **ุงููุทุงู ุงูุณุนุฑู**: ูุชูุณุท ุงูุฃุณุนุงุฑ ุงูุชู ููุชู ุจูุง ุงูุนููู
- **ุขุฎุฑ ุชูุงุนู**: ุชุงุฑูุฎ ูููุช ุขุฎุฑ ูุดุงุท

### 2. ุชูุตูุงุช ูุฎุตุตุฉ ๐

**ุฃููุงุน ุงูุชูุตูุงุช:**

#### ุฃ. ุงููุฆุฉ ุงูููุถูุฉ
```
"ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช! ๐"
```
- ุจูุงุกู ุนูู ุฃูุซุฑ ูุฆุฉ ุจุญุซ ุนููุง ุงูุนููู
- ูุนุฑุถ ููุชุฌุงุช ุฌุฏูุฏุฉ ูู ููุณ ุงููุฆุฉ

#### ุจ. ุงูููู ุงูููุถู
```
"ููุชุฌุงุช ุฃุญูุฑ ูููุฒุฉ! ๐"
```
- ุชุญููู ุงูุฃููุงู ุงูุฃูุซุฑ ูุดุงูุฏุฉ
- ุงูุชุฑุงุญ ููุชุฌุงุช ุจููุณ ุงูููู

#### ุฌ. ุงููุทุงู ุงูุณุนุฑู
```python
# Budget-friendly (ุฃูู ูู 500 ุฌููู)
"ุนุฑูุถ ูุฃุณุนุงุฑ ููุงุณุจุฉ ุชุญุช 500 ุฌููู! ๐ฐ"

# Premium (ุฃูุซุฑ ูู 800 ุฌููู)
"ููุชุฌุงุช ูููุฒุฉ ููุงุฎุฑุฉ! โจ"
```

#### ุฏ. ุงูุจุญุซ ุงูุฃุฎูุฑ
```
"ููุชุฌุงุช ูุดุงุจูุฉ ูู 'ูุณุชุงู ุฃุญูุฑ' ๐"
```

### 3. ุชูุณูู ุงูุฃุฒูุงุก ๐

**ููุงุนุฏ ุชูุณูู ุงูุณูู ุงููุตุฑู:**

| ุงูููุชุฌ ุงูุฃุณุงุณู | ูููู ูุนุงู |
|----------------|----------|
| ูุณุชุงู | ุญุฐุงุกุ ุดูุทุฉุ ุฅูุณุณูุงุฑุงุชุ ุญุฌุงุจ |
| ุจูุทููู | ุจููุฒุฉุ ุชูุดุฑุชุ ุฌุงููุชุ ุญุฐุงุก |
| ุจููุฒุฉ | ุจูุทูููุ ุชููุฑุฉุ ุฌุงููุช |
| ุชููุฑุฉ | ุจููุฒุฉุ ุชูุดุฑุชุ ุญุฐุงุก |
| ุฌุงููุช | ุจูุทูููุ ุชููุฑุฉุ ุจููุฒุฉ |
| ุนุจุงูุฉ | ุญุฌุงุจุ ุดูุทุฉุ ุญุฐุงุก |
| ุญุฌุงุจ | ุจููุฒุฉุ ูุณุชุงูุ ุนุจุงูุฉ |

**ูุซุงู ุนูู ุงูุชูุณูู:**
```
ุนููู: "ุนุงูุฒุฉ ูุณุชุงู ุฃุญูุฑ"
โ ุงููุธุงู ูุฑุณู 3 ูุณุงุชูู ุญูุฑุงุก
โ ุงููุธุงู ููุชุฑุญ:
   "ูุตูุญุฉ ุชูุณูู: ูุณุชุงู ูููู ูุนุงูุง:
    โข ููููู ุชูุณูููุง ูุน ุญุฐุงุก! ๐โจ
    โข ููููู ุชูุณูููุง ูุน ุดูุทุฉ! ๐โจ"
```

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุนููุงุก (ุนุจุฑ Messenger/WhatsApp)

#### 1. ุงูุจุญุซ ุงูุนุงุฏู ุนู ููุชุฌุงุช
```
ุนููู: "ุนุงูุฒุฉ ูุณุชุงู ุฃุญูุฑ"

ุงููุธุงู:
โ ูุจุญุซ ูู BWW Store
โ ูุฑุณู 3 ููุชุฌุงุช
โ ูุชุชุจุน ุงูุงูุชูุงู (ูุณุชุงูุ ุฃุญูุฑ)
โ ูุฑุฏ ุจู:
   "ุชู ุงูุนุซูุฑ ุนูู 3 ููุชุฌ ููุงุณุจ! ๐
    
    ๐ก ุชูุตูุงุช ูู:
    โข ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช!
    โข ููููู ุชูุณูููุง ูุน ุญุฐุงุก! ๐โจ"
```

#### 2. ุทูุจ ุชูุตูุงุช ูุจุงุดุฑุฉ
```
ุนููู: "ุชูุตูุงุช"
ุฃู
ุนููู: "ุงูุชุฑุงุญุงุช"
ุฃู
ุนููู: "recommendations"

ุงููุธุงู:
โ ูุญูู ุณุฌู ุงูุนููู
โ ููุฏู 3 ุชูุตูุงุช ูุฎุตุตุฉ
โ ูุจุญุซ ุชููุงุฆูุงู ุนู ุงูููุชุฌุงุช ุงูููุชุฑุญุฉ
โ ูุฑุณู ุจุทุงูุงุช ุงูููุชุฌุงุช
```

**ูุซุงู:**
```
ุนููู: "ุชูุตูุงุช"

ุงููุธุงู:
"๐ก ุชูุตูุงุช ูุฎุตุตุฉ ูู:
 โข ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช! ๐
 โข ููุชุฌุงุช ุฃุญูุฑ ูููุฒุฉ! ๐
 โข ุนุฑูุถ ูุฃุณุนุงุฑ ููุงุณุจุฉ ุชุญุช 500 ุฌููู! ๐ฐ"

[ูุฑุณู 3 ุจุทุงูุงุช ููุชุฌุงุช ุชููุงุฆูุงู]
```

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ุงูููู ุงูุฑุฆูุณู
```
app/services/ai/product_recommender.py
```

### Class: `ProductRecommender`

#### Properties
```python
{
    "customer_preferences": {
        "user_id": {
            "searches": [
                {"query": "ูุณุชุงู ุฃุญูุฑ", "timestamp": "2025-11-13T..."}
            ],
            "viewed_categories": ["ูุณุชุงู", "ุจููุฒุฉ", ...],
            "viewed_colors": ["ุฃุญูุฑ", "ุฃุฒุฑู", ...],
            "price_range": [450, 600, 550, ...],
            "last_interaction": "2025-11-13T..."
        }
    }
}
```

#### Methods

##### `track_product_interest(user_id, search_query, viewed_products)`
ุชุชุจุน ุงูุชูุงูุงุช ุงูุนููู ุชููุงุฆูุงู

**Parameters:**
- `user_id` (str): ูุนุฑู ุงูุนููู
- `search_query` (str): ุงุณุชุนูุงู ุงูุจุญุซ
- `viewed_products` (list): ุงูููุชุฌุงุช ุงูุชู ุดุงูุฏูุง

**Returns:** None (async)

**Example:**
```python
await recommender.track_product_interest(
    user_id="123456",
    search_query="ูุณุชุงู ุฃุญูุฑ",
    viewed_products=[
        {"category": "ูุณุชุงู", "color": "ุฃุญูุฑ", "price": 450},
        {"category": "ูุณุชุงู", "color": "ุฃุญูุฑ", "price": 550}
    ]
)
```

##### `get_recommendations(user_id, current_context)`
ุงูุญุตูู ุนูู ุชูุตูุงุช ูุฎุตุตุฉ

**Parameters:**
- `user_id` (str): ูุนุฑู ุงูุนููู
- `current_context` (str, optional): ุงูุณูุงู ุงูุญุงูู

**Returns:**
```python
{
    "has_recommendations": True,
    "recommendations": [
        {
            "type": "favorite_category",
            "suggestion": "ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช! ๐",
            "search_query": "ูุณุชุงู",
            "reason": "based_on_browsing_history"
        }
    ],
    "customer_profile": {
        "total_searches": 15,
        "favorite_category": "ูุณุชุงู",
        "favorite_color": "ุฃุญูุฑ",
        "avg_price_range": 500
    }
}
```

##### `suggest_outfit_combinations(viewed_product)`
ุงูุชุฑุงุญ ุชูุณููุงุช ูุงููุฉ

**Parameters:**
- `viewed_product` (dict): ุงูููุชุฌ ุงููุนุฑูุถ

**Returns:**
```python
{
    "has_suggestions": True,
    "message": "ูุตูุญุฉ ุชูุณูู: ูุณุชุงู ูููู ูุนุงูุง:",
    "suggestions": [
        {
            "item": "ุญุฐุงุก",
            "search_query": "ุญุฐุงุก ุฃุญูุฑ",
            "message": "ููููู ุชูุณูููุง ูุน ุญุฐุงุก! ๐โจ"
        }
    ],
    "complementary_items": ["ุญุฐุงุก", "ุดูุทุฉ", "ุฅูุณุณูุงุฑุงุช", "ุญุฌุงุจ"]
}
```

##### `generate_smart_response(user_id, search_query, products_found)`
ุชูููุฏ ุงุณุชุฌุงุจุฉ ุฐููุฉ ูุน ุชูุตูุงุช

**Parameters:**
- `user_id` (str): ูุนุฑู ุงูุนููู
- `search_query` (str): ุงุณุชุนูุงู ุงูุจุญุซ
- `products_found` (list): ุงูููุชุฌุงุช ุงูููุฌูุฏุฉ

**Returns:** (str) ุฑุณุงูุฉ ุฐููุฉ ุจุงูุนุฑุจูุฉ

**Example:**
```python
response = await recommender.generate_smart_response(
    user_id="123456",
    search_query="ูุณุชุงู ุฃุญูุฑ",
    products_found=[...]
)
# "ุชู ุงูุนุซูุฑ ุนูู 3 ููุชุฌ ููุงุณุจ! ๐\n\n๐ก ุชูุตูุงุช ูู:..."
```

---

## ๐ ุงูุชูุงูู ูุน Message Handler

### ูู `message_handler.py`

```python
# Import
from app.services.ai.product_recommender import ProductRecommender

# Initialize
self.product_recommender = ProductRecommender()

# ูู ูุนุงูุฌุฉ ุงูุฑุณุงุฆู
if product_query_detected and self.bww_store:
    product_results = await self.bww_store.search_and_format_products(...)
    
    if self.product_recommender:
        ai_response = await self.product_recommender.generate_smart_response(
            user_id=str(user_id),
            search_query=message_text,
            products_found=products_dict
        )
```

### Service Status
```python
status = self.product_recommender.get_service_status()
# {
#   "service": "ProductRecommender",
#   "status": "operational",
#   "initialized": True,
#   "tracked_customers": 25,
#   "timestamp": "2025-11-13T..."
# }
```

---

## ๐ ุชุญููู ุงูุจูุงูุงุช

### Customer Profile
```python
profile = recommender.get_customer_preferences("user_id")
# {
#   "searches": [...],
#   "viewed_categories": ["ูุณุชุงู", "ุจููุฒุฉ", ...],
#   "viewed_colors": ["ุฃุญูุฑ", "ุฃุฒุฑู", ...],
#   "price_range": [450, 600, ...],
#   "last_interaction": "2025-11-13T..."
# }
```

### ุฅุญุตุงุฆูุงุช
- **ุฅุฌูุงูู ุงูุนููุงุก ุงููุชุชุจุนูู**: `len(recommender.customer_preferences)`
- **ูุชูุณุท ุงูุจุญุซ ููู ุนููู**: ูููู ุญุณุงุจู ูู `searches`
- **ุงููุฆุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ**: ุชุญููู `viewed_categories` ูุฌููุน ุงูุนููุงุก
- **ูุทุงู ุงูุฃุณุนุงุฑ ุงูุฃูุซุฑ ุดููุนุงู**: ุชุญููู `price_range`

---

## ๐ ุงูุฎุตูุตูุฉ ู GDPR

### ุญุฐู ุจูุงูุงุช ุงูุนููู
```python
success = recommender.clear_customer_data("user_id")
# True ุฅุฐุง ุชู ุงูุญุฐู ุจูุฌุงุญ
# False ุฅุฐุง ูู ููู ููุงู ุจูุงูุงุช
```

### ุณูุงุณุฉ ุงูุงุญุชูุงุธ ุจุงูุจูุงูุงุช
- **Searches**: ุขุฎุฑ 20 ุจุญุซ ููุท
- **Categories**: ุขุฎุฑ 50 ูุดุงูุฏุฉ
- **Colors**: ุขุฎุฑ 50 ูุดุงูุฏุฉ
- **ุงูุชุฎุฒูู**: In-memory (ุบูุฑ ุฏุงุฆู)
- **ุงูุญุฐู**: ุชููุงุฆูุงู ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู

---

## ๐จ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุนูููุฉ ุชุจุญุซ ุนู ูุณุชุงู
```
๐ค ุนูููุฉ: "ุนุงูุฒุฉ ูุณุชุงู ุฃุญูุฑ ููุณูุฑุฉ"

๐ค ุงููุธุงู:
1. ููุชุดู ุงุณุชูุณุงุฑ ููุชุฌ (ูููุฉ "ุนุงูุฒุฉ" + "ูุณุชุงู")
2. ูุจุญุซ ูู BWW Store ุนู "ูุณุชุงู ุฃุญูุฑ ููุณูุฑุฉ"
3. ูุฌุฏ 3 ููุชุฌุงุช ููุงุณุจุฉ
4. ูุชุชุจุน ุงูุงูุชูุงู:
   - Category: "ูุณุชุงู"
   - Color: "ุฃุญูุฑ"
   - Context: "ููุณูุฑุฉ"
5. ูุฑุณู 3 ุจุทุงูุงุช ููุชุฌุงุช ุนุจุฑ Messenger
6. ูุฑุฏ ุจู:
   "ุชู ุงูุนุซูุฑ ุนูู 3 ููุชุฌ ููุงุณุจ! ๐
    
    ๐ก ุชูุตูุงุช ูู:
    โข ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช! ๐
    โข ููููู ุชูุณูููุง ูุน ุญุฐุงุก! ๐โจ
    โข ููููู ุชูุณูููุง ูุน ุดูุทุฉ! ๐โจ"
```

### ูุซุงู 2: ุนูููุฉ ุชุทูุจ ุชูุตูุงุช
```
๐ค ุนูููุฉ: "ุชูุตูุงุช"

๐ค ุงููุธุงู:
1. ูุญูู ุณุฌู ุงูุนูููุฉ:
   - 15 ุจุญุซ ุณุงุจู
   - ุงููุฆุฉ ุงูููุถูุฉ: "ูุณุชุงู" (8 ูุฑุงุช)
   - ุงูููู ุงูููุถู: "ุฃุญูุฑ" (5 ูุฑุงุช)
   - ูุชูุณุท ุงูุณุนุฑ: 500 ุฌููู
2. ูููุฏ 3 ุชูุตูุงุช:
   - "ููุชุฌุงุช ูุณุชุงู ุฌุฏูุฏุฉ ูุตูุช! ๐"
   - "ููุชุฌุงุช ุฃุญูุฑ ูููุฒุฉ! ๐"
   - "ุนุฑูุถ ูุฃุณุนุงุฑ ููุงุณุจุฉ ุชุญุช 500 ุฌููู! ๐ฐ"
3. ูุจุญุซ ุชููุงุฆูุงู ุนู "ูุณุชุงู" (ุฃูู ุชูุตูุฉ)
4. ูุฑุณู 3 ุจุทุงูุงุช ููุชุฌุงุช
5. ูุฑุฏ ุจุงูุชูุตูุงุช
```

### ูุซุงู 3: ุนูููุฉ ุฌุฏูุฏุฉ (ุจุฏูู ุณุฌู)
```
๐ค ุนูููุฉ ุฌุฏูุฏุฉ: "ุชูุตูุงุช"

๐ค ุงููุธุงู:
"ูุง ุชูุฌุฏ ุชูุตูุงุช ุญุงููุงู - ุฌุฑุจ ุงูุจุญุซ ุนู ููุชุฌุงุช ุฃููุงู! ๐๏ธ"
```

---

## โก ุงูุฃุฏุงุก

### ุงูุชุฎุฒูู
- **In-Memory**: ุณุฑูุน ุฌุฏุงู (O(1) ูููุตูู)
- **No Database**: ูุง ุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **Auto-Cleanup**: ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ

### ุงูุณุฑุนุฉ
- **Track Interest**: < 1ms
- **Get Recommendations**: < 5ms
- **Generate Smart Response**: < 10ms

### ุงูุฐุงูุฑุฉ
- **ููู ุนููู**: ~5-10 KB
- **1000 ุนููู**: ~5-10 MB
- **ููุจูู**: ุญุชู 10,000 ุนููู ูุดุท

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### 1. Machine Learning Models
```python
# ุงูุชูุจุค ุจุงูููุชุฌุงุช ุงููุญุชููุฉ
predicted_products = ml_model.predict(customer_history)
```

### 2. Collaborative Filtering
```python
# "ุงูุนููุงุก ุงูุฐูู ุงุดุชุฑูุง X ุงุดุชุฑูุง ุฃูุถุงู Y"
similar_customers = find_similar_customers(user_id)
recommendations = get_popular_among(similar_customers)
```

### 3. A/B Testing
```python
# ุงุฎุชุจุงุฑ ูุนุงููุฉ ุงูุชูุตูุงุช ุงููุฎุชููุฉ
variant = ab_test.get_variant(user_id)
if variant == "A":
    show_category_recommendations()
else:
    show_color_recommendations()
```

### 4. Seasonal Trends
```python
# ุชูุตูุงุช ููุณููุฉ
if current_month in [6, 7, 8]:  # ุตูู
    recommend_summer_collection()
elif current_month in [12, 1, 2]:  # ุดุชุงุก
    recommend_winter_collection()
```

### 5. Database Persistence
```python
# ุญูุธ ุงูุชูุถููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
await db.save_customer_preferences(user_id, preferences)
```

---

## ๐ ุณุฌู ุงูุชุญุฏูุซุงุช

| ุงููุณุฎุฉ | ุงูุชุงุฑูุฎ | ุงูุชุบููุฑุงุช |
|--------|--------|-----------|
| 1.0.0 | 2025-11-13 | ุงูุฅุตุฏุงุฑ ุงูุฃููู |

---

## ๐ค ุงููุณุงููุฉ

ูููุณุงููุฉ ูู ุชุทููุฑ Product Recommender:

1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก branch ุฌุฏูุฏ (`git checkout -b feature/recommendation-enhancement`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add recommendation feature'`)
4. Push ุฅูู Branch (`git push origin feature/recommendation-enhancement`)
5. ูุชุญ Pull Request

---

## ๐ ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงูู:
- **ุงูููู**: `app/services/ai/product_recommender.py`
- **ุงูุชูุซูู**: `docs/PRODUCT_RECOMMENDER.md`
- **ุงูุงุฎุชุจุงุฑุงุช**: ูุฑูุจุงู ูู `tests/test_product_recommender.py`

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** Migochat Team  
**ุงูุชุฑุฎูุต:** Private  
**ุงูุญุงูุฉ:** โ Production Ready
